<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Instance generator · StochasticVehicleScheduling.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://BatyLeo.github.io/StochasticVehicleScheduling.jl/dataset/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">StochasticVehicleScheduling.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../math/">Problem statement</a></li><li class="is-active"><a class="tocitem" href>Instance generator</a><ul class="internal"><li><a class="tocitem" href="#City"><span>City</span></a></li><li><a class="tocitem" href="#Graph"><span>Graph</span></a></li><li><a class="tocitem" href="#Features"><span>Features</span></a></li></ul></li><li><a class="tocitem" href="../algorithms/">Optimization algorithms</a></li><li><span class="tocitem">Learning with InferOpt.jl</span><ul><li><a class="tocitem" href="../inferopt/">InferOpt tutorial</a></li><li><a class="tocitem" href="../paper/">Reproducing paper experiments</a></li></ul></li><li><a class="tocitem" href="../api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Instance generator</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Instance generator</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/BatyLeo/StochasticVehicleScheduling.jl/blob/main/docs/src/literate/dataset.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Instance-generator"><a class="docs-heading-anchor" href="#Instance-generator">Instance generator</a><a id="Instance-generator-1"></a><a class="docs-heading-anchor-permalink" href="#Instance-generator" title="Permalink"></a></h1><p>This package implements an instance generator, which can be used with the <a href="../api/#StochasticVehicleScheduling.create_random_instance-Tuple{}"><code>create_random_instance</code></a> method.</p><p>For example, we can create a random instance with 10 tasks and 10 scenarios and plot it:</p><pre><code class="language-julia hljs">using StochasticVehicleScheduling
instance = create_random_instance(; nb_tasks=10, nb_scenarios=10)

using Plots
fig = plot()
for i in 1:(get_nb_tasks(instance) + 1)
    task = instance.city.tasks[i]
    (; start_point, end_point) = task
    points = [(start_point.x, start_point.y), (end_point.x, end_point.y)]
    plot!(fig, points; color=:black, label=&quot;&quot;)
    scatter!(
        fig,
        points;
        marker=:rect,
        markersize=10,
        label=&quot;&quot;,
        series_annotations=[(&quot;$(i-1)&quot;, 9), &quot;&quot;],
    )
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">qt.qpa.xcb: could not connect to display
qt.qpa.plugin: Could not load the Qt platform plugin &quot;xcb&quot; in &quot;&quot; even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: linuxfb, minimal, offscreen, vnc, xcb.

Aborted (core dumped)
connect: Connection refused
GKS: can&#39;t connect to GKS socket application

GKS: Open failed in routine OPEN_WS
GKS: GKS not in proper state. GKS must be either in the state WSOP or WSAC in routine ACTIVATE_WS</code></pre><p><img src="../instance2.png" alt="instance2"/> This instance object can be used as input of all algorithms implemented in this package. More details on its attributes and how they are computed are provided bellow but not needed in order to experiment with this package.</p><h2 id="City"><a class="docs-heading-anchor" href="#City">City</a><a id="City-1"></a><a class="docs-heading-anchor-permalink" href="#City" title="Permalink"></a></h2><p>When creating an instance, we first create a <a href="../api/#StochasticVehicleScheduling.City"><code>StochasticVehicleScheduling.City</code></a> object. By default, a <a href="../api/#StochasticVehicleScheduling.City"><code>City</code></a> is a squared map of 50 minutes width, divided in 25 squared (10 minutes width) districts (cf. the example plot above). The depot is located at the center of the map. Each task <span>$v$</span> has an (uniformly drawn) start point, start time <span>$t_v^b$</span>, end point, and end time <span>$t_v^e$</span>.</p><p>For each scenario <span>$s\in S$</span>, we roll multiple random variables.</p><p>For each district <span>$d$</span> and hour <span>$h$</span> of the day, <span>$\beta_{d, h}$</span> are independent log-normal variables with randomly (uniform) drawn parameters <span>$(\mu, \sigma)\in [1, 3]\times [0.4, 0.6]$</span>.</p><p>For each district <span>$d$</span> and hour <span>$h$</span> of the day, <span>$\zeta_{d,h}^{dis}$</span> models the congestion in the district at this time.</p><p class="math-container">\[\begin{cases}
    \forall d,\, \zeta^{dis}_{d, 0} = \beta_{d,0}\\
    \forall d,h,\, \zeta^{dis}_{d, h+1} = \frac{1}{2}\zeta^{dis}_{d, h} + \beta_{d,h}
\end{cases}\]</p><p>For each hour <span>$h$</span> of the day, <span>$\zeta^{inter}_h$</span> models the congestion on roads between districts, and is computed similarly:</p><p class="math-container">\[\begin{cases}
    \zeta^{inter}_0 = I\\
    \zeta^{inter}_{h+1} = (\zeta^{inter}_{h} + 0.1)I
\end{cases}\]</p><p>with <span>$I\sim \log\mathcal{N}(0.02, 0.05)$</span>.</p><p>Let <span>$v$</span> be a task corresponding to a trip between district <span>$d_1$</span> and <span>$d_2$</span>. We compute the perturbed start and end times:</p><p class="math-container">\[\begin{cases}
    \xi_v^b = t_v^b + \beta_v\\
    \xi_v^e = \xi_v^b + t_v^e - t_v^b + \zeta^{dis}_{d_1,h(\xi_1)} + \zeta^{inter}_{h(\xi_2)} + \zeta^{dis}_{d_2, h(\xi_3)}
\end{cases}\]</p><p>with <span>$\xi_1 = \xi_v^b$</span>, <span>$\xi_2 = \xi_1 + \zeta^{dis}_{d_1,h(\xi_1)}$</span>, and <span>$\xi_3 = \xi_2 + t_v^e - t_v^b + \xi^{inter}_{h(\xi_2)}$</span>.</p><p>Finally, for any <span>$a=(u,v)$</span>, we compute the perturbed travel time:</p><p><span>$\xi_a^{tr} = \xi_v^b + t_a^{tr} + \zeta^{dis}_{d_1,h(\xi_1)} + \zeta^{inter}_{h(\xi_2)} + \zeta^{dis}_{d_2, h(\xi_3)}$</span> with <span>$\xi_1 = \xi_u^e$</span>, <span>$\xi_2 = \xi_1 + \zeta^{dis}_{d_1,h(\xi_1)}$</span>, and<span>$\xi_3 = \xi_2 + t_a^{tr} + \xi^{inter}_{h(\xi_2)}$</span>.</p><p>The function <a href="../api/#StochasticVehicleScheduling.create_random_city-Tuple{}"><code>create_random_city</code></a> can be used to create cities with modified default options.</p><h2 id="Graph"><a class="docs-heading-anchor" href="#Graph">Graph</a><a id="Graph-1"></a><a class="docs-heading-anchor-permalink" href="#Graph" title="Permalink"></a></h2><p>Once the <code>City</code> object is generated, we can compute an associated acyclic digraph <span>$D$</span>, as described in the <a href="../math/#Problem-statement">Problem statement</a>.</p><h2 id="Features"><a class="docs-heading-anchor" href="#Features">Features</a><a id="Features-1"></a><a class="docs-heading-anchor-permalink" href="#Features" title="Permalink"></a></h2><p>An instance contains a matrix of 20 features for every arc of the corresponding graph :</p><ul><li>Length of the arc in minutes (deterministic travel time).</li><li>Cost of a vehicle if the arc is connected to the source.</li><li>The 9 deciles of the slack <span>$\xi_v^b - (\xi_u^e + \xi_a^{tr})$</span>.</li><li>The cumulative probability distribution of the slack, evaluated in <span>$[-100, -50, -20, -10, 0, 50, 200, 500]$</span>.</li></ul><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../math/">« Problem statement</a><a class="docs-footer-nextpage" href="../algorithms/">Optimization algorithms »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 18 July 2023 12:19">Tuesday 18 July 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
